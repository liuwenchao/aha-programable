<!-- Import Polymer -->
<link rel="import" href="../bower_components/polymer/polymer.html">

<!-- Define your custom element -->
<polymer-element name="aha-programable" attributes="value">

    <template>
        <span id="main"></span>
    </template>

    <script>
        function fill(code, span) {
            //TODO how to stop user write codes like: alert(); delete windows;
            try{
                var result = new Function(code)();
            } catch(e) {
                console.error('failed to evaluate: ' + code);
                return;
            }
            if (undefined === result) {
                result = '';
            }
            while( span.firstChild ) {
                span.removeChild( span.firstChild );
            }
            span.appendChild( document.createTextNode(result) );
        };
        Polymer('aha-programable', {
            ready: function() {
                fill(this.value, this.$.main);
            },
            valueChanged: function(){
                fill(this.value, this.$.main);
            }
        });
    </script>

</polymer-element>
